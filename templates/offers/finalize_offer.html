{% extends "base.html" %}
{% load humanize %}

{% block content %}
<div class="container mt-5">
    <div class="multi-step-form bg-white p-4 rounded shadow-sm mx-auto" style="max-width: 600px;">
        <form id="paymentForm" method="post">
            {% csrf_token %}

            <!-- Step 1: Contact Info -->
            <div class="form-step" id="step-1">
                <h3 class="mb-4">Contact Information</h3>
                <div class="mb-3">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" name="name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Address</label>
                    <input type="text" class="form-control" name="address" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Country</label>
                    <input type="text" class="form-control" name="country" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" name="phone" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="nextStep(2)">Next</button>
            </div>

            <!-- Step 2: Payment Info -->
            <div class="form-step d-none" id="step-2">
                <h3 class="mb-4">Payment Information</h3>
                <div class="mb-3">
                    <label class="form-label">Payment Method</label>
                    <select class="form-select" name="payment_type" required>
                        <option value="">Choose...</option>
                        <option value="card">Credit/Debit Card</option>
                        <option value="mortgage">Mortgage</option>
                        <option value="bank_transfer">Bank Transfer</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Name on Card</label>
                    <input type="text" class="form-control" name="card_name">
                </div>
                <div class="mb-3">
                    <label class="form-label">Card Number</label>
                    <input type="text" class="form-control" name="card_number">
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <label class="form-label">Expiration Date</label>
                        <input type="text" class="form-control" name="expiry" placeholder="MM/YY">
                    </div>
                    <div class="col">
                        <label class="form-label">CVC</label>
                        <input type="text" class="form-control" name="cvc">
                    </div>
                </div>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" onclick="nextStep(1)">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(3)">Next</button>
                </div>
            </div>

            <!-- Step 3: Review -->
            <div class="form-step d-none" id="step-3">
                <h3 class="mb-4">Review Your Information</h3>
                <div id="reviewSection">
                    <!-- JavaScript will fill this in -->
                </div>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" onclick="nextStep(2)">Back</button>
                    <button type="submit" class="btn btn-success">Confirm and Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    function nextStep(step) {
        document.querySelectorAll('.form-step').forEach(el => el.classList.add('d-none'));
        document.getElementById(`step-${step}`).classList.remove('d-none');

        if (step === 3) {
            const formData = new FormData(document.getElementById('paymentForm'));
            let html = '';
            for (let [key, value] of formData.entries()) {
                html += `<p><strong>${key}:</strong> ${value}</p>`;
            }
            document.getElementById('reviewSection').innerHTML = html;
        }
    }
</script>
{% endblock %}
